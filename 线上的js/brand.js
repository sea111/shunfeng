function contextHeight(){var e=0;return $.each(arguments,function(a,t){e+=1*$(t).height()}),document.documentElement.clientHeight-e}function getColor(e){var a="";switch(e){case"102701":a="#e5ae19";break;case"102702":a="#fd8317";break;case"102703":a="#5f7dff";break;case"102704":a="#ff3552";break;case"102705":a="#fd8317";break;case"102706":a="#ff3552";break;case"102707":a="#5f7dff";break;case"102708":a="#ff3552";break;case"102709":a="#fd8317";break;case"102710":a="#5f7dff";break;case"102711":a="#5f7dff";break;case"102712":a="#fd8317";break;case"102713":a="#ff3552";break;case"102714":a="#fd8317";break;default:a="#e51a9"}return a}$(function(){function e(a){WPBridge.callMethod("JsInvokeNative","wpEncrypt",{key:a,params:["zh"]},function(a){codeValue=a.data.result,$.ajax({type:"post",url:wpCommon.Url+"/wpwl/brand/findAllBrand",async:!0,cache:!1,data:{oversea:codeValue[0].trim()},timeout:1e4,success:function(a){if("AES加密解密失败"==a.errMsg)aseFail||($.ajax({type:"post",url:wpCommon.Url+"/wpwl/getKey",success:function(a){s=a.data,localStorage.setItem("key",a.data),e(s)}}),aseFail=!0);else{if(0==a.success)$(".loading").show(),$("#content").hide(),$(".middle img").attr("src","img/error_else.png"),$(".middle p").html("出错了，请稍后再试"),$(".all").html("页面异常");else try{if(a.success){var t="",l=a.data;for(var o in l){var n=l[o].brandVOList;if(0!=n.length){var s=l[o].breadTypeValue;t+="<div class='contents'>",t+='<div class="head">',t+='<p class="expensive" style="color:'+getColor(s)+'" ><img class="imgLeft" src="img/'+s+'.png" />'+l[o].breadTypeName+"</p></div>";for(var c in n)t+='<div class="cont">',t+='<dl class="dl" brandname="'+n[c].brandName+'" brandid="'+n[c].id+'">',t+=n[c].iconUrl?'<dt class="dt"><img class="brandImg" src="'+n[c].iconUrl+'" /></dt>':'<dt class="dt"><img class="brandImg" src="img/default_error2.png" /></dt>',t+='<dd class="dd">',t+="<div class='dds'><p class='brand'>"+n[c].brandName+"</p>",t+="<p class='num'>"+n[c].brandCount+"个宝贝</p>",t+="<p class='starTime'>最近更新："+n[c].gmtModified+"</p></div>",t+='<a href="javascript:;" class="right"></a>',t+="</dd>",t+="</dl>",t+="</div>";t+="</div>"}}$(".list-good").html(t),Iscroll.scroll(),$("#content").on("click","dl",function(){var e=$(this).attr("brandid"),a=$(this).attr("brandname");localStorage.setItem("brandid",e),localStorage.setItem("brandname",a),window.location.href="list.html?pageId=H5_A006&otherId="+e})}}catch(e){$(".loading").show(),$("#content").hide(),$(".middle img").attr("src","img/error_else.png"),$(".middle p").html("出错了，请稍后再试"),$(".all").html("页面异常")}WPBridge.callMethod("JsInvokeNative","wpShowWebView",{},function(){}),WPBridge.callMethod("JsInvokeNative","wpDismissLoadingDialog",{},function(){})}},error:function(e,a,t){WPBridge.callMethod("JsInvokeNative","wpShowWebView",{},function(){}),WPBridge.callMethod("JsInvokeNative","wpDismissLoadingDialog",{},function(){}),WPBridge.callMethod("JsInvokeNative","wpNetError",{url:wpCommon.Url+"/h5/brand.html"},function(){}),"timeout"==a&&($(".loading").show(),$("#content").hide(),$(".all").html("网络异常"))}})})}WPBridge.callMethod("JsInvokeNative","wpShowLoadingDialog",{},function(){}),window.aseFail="",$.ajax({type:"post",url:wpCommon.Url+"/wpwl/getKey",cache:!1,success:function(a){key=a.data,localStorage.setItem("key",a.data),e(key)}})}),$(function(){$(".goback").on("touchstart",function(){WPBridge.callMethod("JsInvokeNative","wpFinishH5",{},function(){})}),$("#wpReload").click(function(){brand(key)})}),$(function(){myScroll=new IScroll("#content",{click:!0,fixedScrollbar:!0,disableTouch:!1,disablePointer:!0,mouseWheel:!0,disableMouse:!1,scrollBars:!0})});var Iscroll={scroll:function(){var e=contextHeight("#header");$("#content").css({height:e+"px"}),myScroll.refresh()}};